{{ define "pagination" }}
<div class="pagination">
    {{if .first_page}}
        <a class="prev" href="/board/{{ .board.Id }}/{{ .op.Id }}?page=0">&laquo; first page</a>
    {{end}}
    {{if .prev_page}}
        <a class="prev" href="/board/{{ .board.Id }}/{{ .op.Id }}?page={{Add .page_id -1}}">&laquo; previous page</a>
    {{end }}
    {{if .next_page}}
        <a class="next" href="/board/{{ .board.Id }}/{{ .op.Id }}?page={{Add .page_id 1}}">next page &raquo;</a>
    {{end}}
    {{if .last_page}}
        <a class="next" href="/board/{{ .board.Id }}/{{ .op.Id }}?page={{ .op.GetPagesInThread }}#latest">last page &raquo;</a>
    {{end}}
</div>
{{end}}

{{define "post"}}
<div class="post container">
  <div class="post-meta three columns">
    {{if .Author.Avatar}}
      <img class="author-avatar" src="{{.Author.Avatar}}" />
    {{else}}
      <img class="author-avatar" src="static/images/default_user.png" />
    {{end}}
    <a class="author-name" href="user/{{.Author.Id}}">{{.Author.Username}}</a>

    {{if .Author.UserTitle}}
      <p class="user-title">{{.Author.UserTitle}}</p>
    {{end}}
  </div>

  <div class="post-topmeta thirteen columns">
    Some information about the post goes here
  </div>

  <div class="post-content thirteen columns">
    {{ParseMarkdown .Content}}
  </div>
</div>
{{end}}

{{define "content"}}
<div class="container">
  <div class="eight columns">
    <h1>{{.op.Title}}</h1>
  </div>

  {{if .current_user}}
    <div class="action-bar eight columns">
      <a class="action-button" href="board/{{.op.Board.Id}}/{{op.Id}}/#reply">Reply</a>
    </div>
  {{end}}
</div>

{{if not .first_page}}
  {{ template "post" .op}}
{{end}}

{{range .posts}}
  {{template "post" .}}
{{end}}
{{end}}
